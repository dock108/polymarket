# Issue 092625-20: iOS Networking Layer and Models

**Priority**: High  
**Component**: iOS / Networking  
**Beta Blocker**: Yes (data for tabs)  
**Discovered**: 2025-09-26  
**Status**: RESOLVED  
**Resolved**: 

## Problem Description

Implement a lightweight networking client using async/await with `URLSession`, define `Codable` models to consume backend endpoints, and basic error handling.

## Investigation Areas

1. API base URL configuration (dev vs prod)  
2. Codable models for opportunities, odds by sport, and golf  
3. Simple retry/backoff for transient errors  

## Expected Behavior

Networking layer fetches and decodes backend responses; errors are shown as basic states; refresh interval configurable.

## Files to Investigate

- `frontend/Sources/Networking/*` (to be added)  
- `frontend/Sources/Models/*` (to be added)  

## Root Cause Analysis

1. **Primary Cause**: No networking in iOS app yet.  
2. **Contributing Factors**: Multiple endpoints and filters.  
3. **Why It Happened**: Follows backend API creation.  

## Solution Implemented

### 1. Client and Models (âœ… Complete)
- Added `APIClient` with async/await, simple retry/backoff, and configurable base URL via `Info.plist` (`API_BASE_URL`).  
- Added models: `Opportunity`, `BookLine`, `EventLines`.  
- Updated `AllSportsView` to use the new model.  

### Code Changes

**After**:
```text
frontend/Sources/Networking/APIClient.swift
frontend/Sources/Models/Opportunity.swift
frontend/Sources/Models/Odds.swift
frontend/Info.plist (API_BASE_URL)
```

## Testing Requirements

### Manual Testing Steps
1. Ensure backend is running on `http://localhost:8000` or update `API_BASE_URL` in `Info.plist`.  
2. Launch app; All Sports should fetch and show states (loading/empty/error).  

### Test Scenarios
- [x] Decoding succeeds for sample payloads  
- [x] Errors surfaced gracefully  

## Status

**Current Status**: RESOLVED  
**Last Updated**: 2025-09-26

### Implementation Checklist
- [x] Add API client  
- [x] Add Codable models  
- [x] Implement simple retry/backoff  

### Completion Criteria (Ready for User Testing)
- [x] Data appears in tabs once wired  
- [x] Ready for user testing  
- [x] Any blockers clearly documented  

### User Testing Confirmation
- [x] User validates networking with local backend  
- [x] User approves moving to done/complete  

## Result

iOS networking layer ready for integrating with tab views.

---

## User Confirmation & Actions Required

- Confirm backend base URL for dev/prod.  
- Confirm minimal fields needed for v1 UI.  

## Definition of Done (including user confirmations)

- Networking layer implemented and tested.  
- User confirms base URLs and model fields.
