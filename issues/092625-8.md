# Issue 092625-8: PolymarketService – Fetch Sports/Events/Markets

**Priority**: High  
**Component**: Backend / Polymarket Integration  
**Beta Blocker**: Yes (key data source)  
**Discovered**: 2025-09-26  
**Status**: New  
**Resolved**: 

## Problem Description

Integrate Polymarket Gamma API to fetch sports metadata, active events, and two-outcome markets; parse prices to implied probabilities.

## Investigation Areas

1. Endpoints: `/sports`, `/events?closed=false`, `/markets` if needed.  
2. Two-outcome filtering and outcome mapping.  
3. Rate limiting and minimal caching.  

## Expected Behavior

Service returns normalized markets with implied probabilities suitable for fee adjustment and EV computation.

## Files to Investigate

- `backend/app/services/polymarket.py` (to be added)  
- `backend/app/schemas/*.py` for DTOs (to be added)  

## Root Cause Analysis

1. **Primary Cause**: No service layer for Polymarket.  
2. **Contributing Factors**: Varied market types/outcomes.  
3. **Why It Happened**: Initial integration work.  

## Solution Implemented

### 1. Fetch and Normalize (⏳ In Progress)
- Fetch sports and active events; retrieve markets.  
- Parse outcomes and prices -> implied probabilities.  

### Code Changes

**File Modified**: `N/A - new service and schemas will be added`

**Before**:
```text
No Polymarket integration.
```

**After**:
```text
backend/app/services/polymarket.py
backend/app/schemas/polymarket.py
```

## Testing Requirements

### Manual Testing Steps
1. Run service method to fetch a sample sport; log sample normalized markets.  
2. Verify parsing for “Yes/No” markets.  

### Test Scenarios
- [ ] Two-outcome filter correct  
- [ ] Probabilities in [0,1]  

## Status

**Current Status**: Planned  
**Last Updated**: 2025-09-26

### Implementation Checklist
- [ ] Implement API client  
- [ ] Normalize outcomes  
- [ ] Handle rate limits/errors  

### Completion Criteria (Ready for User Testing)
- [ ] Returns normalized data structures  
- [ ] Basic logs persisted  
- [ ] Ready for user testing  
- [ ] Any blockers clearly documented  

### User Testing Confirmation
- [ ] User verifies sample market normalization  
- [ ] User approves moving to done/complete  

## Result

Polymarket service provides normalized two-outcome markets with implied probabilities.

---

## User Confirmation & Actions Required

- Confirm target sports/tags to include/exclude.  
- Confirm tolerance for stale cache (5–10 minutes).  

## Definition of Done (including user confirmations)

- Service implemented and returns normalized markets.  
- User confirms included sports/tags and cache TTL.
