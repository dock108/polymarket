# Issue 092625-39: Snapshot Fixtures & Seed Utilities

**Priority**: Medium  
**Component**: Backend / Testing & DX  
**Beta Blocker**: No (but accelerates implementation)  
**Discovered**: 2025-09-26  
**Status**: RESOLVED  
**Resolved**: 2025-09-28

## Problem Description

We need deterministic inputs to test normalization, joining, and EV math. Add curated snapshot fixtures and simple seed helpers.

## Investigation Areas

1. Minimal representative PM and sportsbook payloads covering edge cases.  
2. Directory structure and naming (`data/snapshots/`).  
3. Seed script or test helper to load snapshots.

## Expected Behavior

Tests and local debug can load snapshots to reproduce joins and EV calculations consistently.

## Files to Investigate

- `data/snapshots/` (new)  
- `backend/tests/`  
- `backend/scripts/` (optional seed helper)

## Root Cause Analysis

1. **Primary Cause**: Live API variability leads to non-deterministic tests.  
2. **Contributing Factors**: Rate limits and pagination.

## Solution Implemented

### 1. Snapshot Fixtures (âœ… Complete)
- Add small JSON fixtures for PM markets and sportsbook odds.  
- Provide loader utilities for tests.

### Code Changes

**Directory Added**: `data/snapshots/`

**Before**:
```text
Tests rely on live data or ad-hoc stubs.
```

**After**:
```text
Deterministic fixtures enable reliable tests and debugging.
```

## Testing Requirements

### Manual Testing Steps
1. Run tests using fixtures; confirm determinism.  
2. Use debug endpoint against a fixture-backed item.

### Test Scenarios
- [ ] Join and EV results match expected values for snapshots.  
- [ ] Fixtures small and documented.

## Status

**Current Status**: RESOLVED  
**Last Updated**: 2025-09-28

### Implementation Checklist
- [x] Create snapshot fixtures  
- [x] Add loader helpers  
- [x] Update tests

### Completion Criteria (Ready for User Testing)
- [ ] Tests pass with fixtures  
- [ ] Docs mention fixture usage

### User Testing Confirmation
- [ ] User validates fixtures useful for debugging  
- [ ] User approves moving to done/complete

### User Confirmation & Actions Required
- None.

## Result

Snapshots added under `data/snapshots/`; tests load fixtures for deterministic joins and EV.
