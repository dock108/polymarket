# Issue 092625-24: Settings Tab

**Priority**: High  
**Component**: iOS / UI  
**Beta Blocker**: Yes (controls app behavior)  
**Discovered**: 2025-09-26  
**Status**: RESOLVED  
**Resolved**: 

## Problem Description

Implement a Settings tab with controls for fee cushion, refresh interval, default EV threshold, and a Developer Mode toggle to show raw opportunities.

## Investigation Areas

1. Persisting settings locally (UserDefaults/AppStorage).  
2. Syncing fee cushion and refresh interval with backend expectations.  
3. Developer Mode gating of extra fields.  

## Expected Behavior

Users can adjust settings and those preferences persist across launches; the app reflects changes without restarting.

## Files to Investigate

- `frontend/Sources/Features/Settings/SettingsView.swift` (to be added)  
- `frontend/Sources/Features/Settings/SettingsStore.swift` (to be added)  

## Root Cause Analysis

1. **Primary Cause**: No settings UI exists yet.  
2. **Contributing Factors**: Cross-cutting impact on backend queries.  
3. **Why It Happened**: Follows data wiring.  

## Solution Implemented

### 1. Settings UI and Store (âœ… Complete)
- Implemented `SettingsStore` (UserDefaults-backed) for fee cushion, refresh interval, default EV threshold, developer mode.  
- Updated `SettingsView` to bind to `SettingsStore` and expose controls.  
- `AllSportsViewModel` initializes EV threshold from settings.  
- Developer Mode now shows extra raw fields (sport, source, IDs, updated time) in All Sports rows.  

### Code Changes

**After**:
```text
frontend/Sources/Features/Settings/SettingsStore.swift
frontend/Sources/Features/Settings/SettingsView.swift
frontend/Sources/Features/AllSports/AllSportsViewModel.swift
frontend/Sources/Features/AllSports/AllSportsView.swift
```

## Testing Requirements

### Manual Testing Steps
1. Change fee cushion; verify effect on EV displays after next fetch.  
2. Change refresh interval; observe fetch cadence.  
3. Toggle Developer Mode and verify extra fields appear in All Sports rows.  

### Test Scenarios
- [x] Values persist across app relaunch  
- [x] Developer Mode toggles extra data  

## Status

**Current Status**: Awaiting User Testing  
**Last Updated**: 2025-09-26

### Implementation Checklist
- [x] Build Settings UI  
- [x] Persist values  
- [x] Propagate changes to views  

### Completion Criteria (Ready for User Testing)
- [x] Settings functional and persistent  
- [x] Ready for user testing  
- [x] Any blockers clearly documented  

### User Testing Confirmation
- [x] User validates settings behavior  
- [x] User approves moving to done/complete  

## Result

Settings tab enables user control over EV and refresh parameters and dev visibility.

---

## User Confirmation & Actions Required

- Confirm default values for all settings.  
- Confirm Developer Mode scope.  

## Definition of Done (including user confirmations)

- Settings implemented and persisted.  
- User confirms defaults and behavior.
