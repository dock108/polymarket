# Issue 092625-21: All Sports Tab – Opportunities List

**Priority**: High  
**Component**: iOS / UI  
**Beta Blocker**: Yes (primary user view)  
**Discovered**: 2025-09-26  
**Status**: Awaiting User Testing  
**Resolved**: 

## Problem Description

Implement the All Sports tab that displays a list of opportunities sorted by EV%, with key fields (matchup, sport, sources, EV%) and basic filtering controls.

## Investigation Areas

1. SwiftUI list performance and cell reuse patterns.  
2. Filter controls (Picker/Slider) for sport and EV threshold.  
3. Empty/error/loading state designs.  

## Expected Behavior

Users see a responsive list of opportunities sorted by EV%. Filters affect the displayed items immediately, and basic states (loading/empty/error) are handled gracefully.

## Files to Investigate

- `frontend/Sources/Features/AllSports/AllSportsView.swift` (to be added)  
- `frontend/Sources/Features/AllSports/AllSportsViewModel.swift` (to be added)  
- `frontend/Sources/Models/Opportunity.swift`  

## Root Cause Analysis

1. **Primary Cause**: No UI exists for opportunity list.  
2. **Contributing Factors**: Requires pagination/filter awareness.  
3. **Why It Happened**: Follows backend endpoints.  

## Solution Implemented

### 1. List and Filters (✅ Complete)
- Implemented list view with EV% sorting, sport filter (menu), and EV threshold slider.  
- Added `AllSportsViewModel` to manage loading, filtering, sorting, and simple infinite scroll (visibleCount paging).  
- Preserved loading/empty/error states with pull-to-refresh.  

### Code Changes

**After**:
```text
frontend/Sources/Features/AllSports/AllSportsView.swift
frontend/Sources/Features/AllSports/AllSportsViewModel.swift
```

## Testing Requirements

### Manual Testing Steps
1. Load app; verify list renders and sorts by EV%.  
2. Adjust filters; confirm list updates accordingly.  

### Test Scenarios
- [x] Loading state shown on initial fetch  
- [x] Error state when backend unavailable  
- [x] Empty state when no results  

## Status

**Current Status**: Awaiting User Testing  
**Last Updated**: 2025-09-26

### Implementation Checklist
- [x] Implement list view and cell  
- [x] Add filters (sport, EV threshold)  
- [x] Wire to API with pagination  

### Completion Criteria (Ready for User Testing)
- [x] List renders and filters work  
- [x] Ready for user testing  
- [x] Any blockers clearly documented  

### User Testing Confirmation
- [ ] User validates sorting/filtering behavior  
- [ ] User approves moving to done/complete  

## Result

All Sports tab provides a performant, filterable list of opportunities.

---

## User Confirmation & Actions Required

- Confirm filter defaults (sport, EV threshold).  
- Confirm cell layout fields and order.  

## Definition of Done (including user confirmations)

- UI and filters implemented and functional.  
- User confirms defaults and layout.
